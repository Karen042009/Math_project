<!DOCTYPE html>
<html lang="hy">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Probability Theory â€” Interactive Learning Platform</title>
    <meta name="description"
        content="Comprehensive interactive platform for studying probability theory. Theory, practice problems, calculator, and Monte Carlo simulations.">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Fira+Code:wght@400;600&display=swap"
        rel="stylesheet">

    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <!-- MathJax -->
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['\\(', '\\)']],
                displayMath: [['\\[', '\\]'], ['$$', '$$']]
            },
            options: {
                skipHtmlTags: ['script', 'noscript', 'style', 'textarea']
            }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>

    <!-- Stylesheets -->
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/layout.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/simulations.css">
    <link rel="stylesheet" href="css/lab.css">
</head>

<body>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• HEADER / NAVIGATION â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <nav class="glass-nav" id="main-nav">
        <div class="nav-left">
            <div class="logo" onclick="showPage('home')">
                Prob<span class="highlight">Pro</span>
            </div>
        </div>
        <div class="nav-right">
            <div class="nav-links">
                <button class="nav-btn active" onclick="showPage('home')" data-target="home">
                    <i class="fas fa-home"></i> <span data-i18n="nav_home">Home</span>
                </button>
                <button class="nav-btn" onclick="showPage('theory')" data-target="theory">
                    <i class="fas fa-book"></i> <span data-i18n="nav_theory">Theory</span>
                </button>
                <button class="nav-btn" onclick="showPage('practice')" data-target="practice">
                    <i class="fas fa-dumbbell"></i> <span data-i18n="nav_practice">Practice</span>
                </button>
                <button class="nav-btn" onclick="showPage('lab')" data-target="lab">
                    <i class="fas fa-flask"></i> <span data-i18n="nav_lab">Lab</span>
                </button>
                <button class="nav-btn" onclick="showPage('simulations')" data-target="simulations">
                    <i class="fas fa-atom"></i> <span data-i18n="nav_simulations">Simulations</span>
                </button>
            </div>

            <div class="lang-switcher">
                <button class="lang-btn active" onclick="setLanguage('hy')">Õ€Õ…</button>
                <button class="lang-btn" onclick="setLanguage('en')">EN</button>
                <button class="lang-btn" onclick="setLanguage('ru')">RU</button>
            </div>

            <button class="mobile-menu-btn" onclick="toggleMobileMenu()">
                <i class="fas fa-bars"></i>
            </button>
        </div>
    </nav>

    <!-- Mobile Menu -->
    <div id="mobile-menu" class="mobile-menu-overlay">
        <div class="mobile-menu-content">
            <button class="close-menu" onclick="toggleMobileMenu()">Ã—</button>
            <button class="mobile-nav-btn" onclick="showPage('home'); toggleMobileMenu();">
                <i class="fas fa-home"></i> <span data-i18n="nav_home">Home</span>
            </button>
            <button class="mobile-nav-btn" onclick="showPage('theory'); toggleMobileMenu();">
                <i class="fas fa-book"></i> <span data-i18n="nav_theory">Theory</span>
            </button>
            <button class="mobile-nav-btn" onclick="showPage('practice'); toggleMobileMenu();">
                <i class="fas fa-dumbbell"></i> <span data-i18n="nav_practice">Practice</span>
            </button>
            <button class="mobile-nav-btn" onclick="showPage('lab'); toggleMobileMenu();">
                <i class="fas fa-flask"></i> <span data-i18n="nav_lab">Lab</span>
            </button>
            <button class="mobile-nav-btn" onclick="showPage('simulations'); toggleMobileMenu();">
                <i class="fas fa-atom"></i> <span data-i18n="nav_simulations">Simulations</span>
            </button>
            <hr style="border-color: rgba(255,255,255,0.1)">
            <div style="display:flex;gap:8px;justify-content:center;">
                <button class="lang-btn" onclick="setLanguage('hy')">Õ€Õ…</button>
                <button class="lang-btn" onclick="setLanguage('en')">EN</button>
                <button class="lang-btn" onclick="setLanguage('ru')">RU</button>
            </div>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• MAIN CONTENT CONTAINER â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div id="app-container">

        <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ HOME PAGE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
        <section id="home" class="page-section active-section">
            <div class="hero-section">
                <div class="hero-particles">
                    <div class="particle"></div>
                    <div class="particle"></div>
                    <div class="particle"></div>
                    <div class="particle"></div>
                    <div class="particle"></div>
                </div>
                <div class="hero-content">
                    <h1 class="hero-title">
                        <span class="hero-math-icon"><i class="fas fa-infinity"></i></span>
                        <span data-i18n="hero_title">Probability Theory</span>
                    </h1>
                    <p class="hero-subtitle" data-i18n="hero_subtitle">Interactive Learning Platform</p>
                    <p class="hero-desc" data-i18n="hero_desc">
                        Explore the world of probability through comprehensive theory,
                        practice problems, visual calculators, and interactive Monte Carlo simulations.
                    </p>
                    <div class="hero-buttons">
                        <button class="glow-btn" onclick="showPage('theory')">
                            <i class="fas fa-book-open"></i> <span data-i18n="btn_start">Start Learning</span>
                        </button>
                        <button class="glow-btn secondary" onclick="showPage('simulations')">
                            <i class="fas fa-play-circle"></i> <span data-i18n="btn_try_sims">Try Simulations</span>
                        </button>
                    </div>
                </div>

                <div class="hero-features">
                    <div class="feature-card glass-panel" onclick="showPage('theory')">
                        <div class="feature-icon"><i class="fas fa-book"></i></div>
                        <h3 data-i18n="card_theory_title">Theory Encyclopedia</h3>
                        <p data-i18n="card_theory_desc">7 chapters covering everything from basic events to the Central
                            Limit Theorem</p>
                    </div>
                    <div class="feature-card glass-panel" onclick="showPage('practice')">
                        <div class="feature-icon"><i class="fas fa-brain"></i></div>
                        <h3 data-i18n="card_practice_title">Practice Arena</h3>
                        <p data-i18n="card_practice_desc">20+ problems from beginner to Olympic level with smart
                            feedback</p>
                    </div>
                    <div class="feature-card glass-panel" onclick="showPage('lab')">
                        <div class="feature-icon"><i class="fas fa-chart-line"></i></div>
                        <h3 data-i18n="card_lab_title">Calculator & Graphs</h3>
                        <p data-i18n="card_lab_desc">Custom keypad, distribution calculator, Venn diagrams, probability
                            trees</p>
                    </div>
                    <div class="feature-card glass-panel" onclick="showPage('simulations')">
                        <div class="feature-icon"><i class="fas fa-dice"></i></div>
                        <h3 data-i18n="card_sims_title">Monte Carlo Lab</h3>
                        <p data-i18n="card_sims_desc">Galton Board, Monty Hall, and Buffon's Needle interactive
                            simulations</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ THEORY PAGE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
        <section id="theory" class="page-section">
            <h1 style="margin:20px 0 30px; font-size:2.2rem;">
                <i class="fas fa-book" style="color:var(--neon-purple)"></i>
                <span data-i18n="section_theory">Theory Encyclopedia</span>
            </h1>
            <div class="theory-layout">
                <aside class="sidebar">
                    <h3><i class="fas fa-list"></i> <span data-i18n="sidebar_title">Contents</span></h3>
                    <div id="theory-nav">
                        <!-- Dynamically populated by JS -->
                    </div>
                </aside>
                <main class="theory-content" id="theory-dynamic-render">
                    <!-- Dynamically populated by JS -->
                </main>
            </div>
        </section>

        <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ PRACTICE PAGE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
        <section id="practice" class="page-section">
            <div class="practice-header">
                <h1><i class="fas fa-dumbbell" style="color:var(--accent-pink)"></i> <span
                        data-i18n="section_practice">The Practice Arena</span></h1>
                <div class="ai-badge"><i class="fas fa-brain"></i> <span data-i18n="ai_badge_text">Smart feedback system
                        â€” links wrong answers to theory</span>
                </div>
            </div>

            <div class="practice-stats glass-panel" id="practice-stats">
                <!-- Populated by JS -->
            </div>

            <div class="filters">
                <button class="filter-btn active" onclick="filterProblems('all', this)">
                    <i class="fas fa-th"></i> <span data-i18n="filter_all">All</span>
                </button>
                <button class="filter-btn" onclick="filterProblems('beginner', this)">
                    <i class="fas fa-seedling"></i> <span data-i18n="filter_beginner">Beginner</span>
                </button>
                <button class="filter-btn" onclick="filterProblems('intermediate', this)">
                    <i class="fas fa-fire"></i> <span data-i18n="filter_intermediate">Intermediate</span>
                </button>
                <button class="filter-btn" onclick="filterProblems('advanced', this)">
                    <i class="fas fa-bolt"></i> <span data-i18n="filter_advanced">Advanced</span>
                </button>
                <button class="filter-btn" onclick="filterProblems('olympic', this)">
                    <i class="fas fa-trophy"></i> <span data-i18n="filter_olympic">Olympic</span>
                </button>
            </div>

            <div id="problems-grid" class="grid-container">
                <!-- Populated by JS -->
            </div>

            <!-- AI Section -->
            <div style="margin-top:50px; padding-top:30px; border-top:1px solid rgba(255,255,255,0.1);">
                <h2 style="margin-bottom:20px;">
                    <i class="fas fa-robot" style="color:var(--accent-blue)"></i> <span data-i18n="section_ai_gen">AI
                        Problem Generator</span>
                </h2>
                <div class="ai-controls">
                    <select id="ai-topic" class="ai-select">
                        <option value="basic probability" data-i18n="topic_basic">Basic Probability</option>
                        <option value="combinatorics" data-i18n="topic_combinatorics">Combinatorics</option>
                        <option value="conditional probability" data-i18n="topic_conditional">Conditional Probability
                        </option>
                        <option value="Bayes theorem" data-i18n="topic_bayes">Bayes' Theorem</option>
                        <option value="distributions" data-i18n="topic_distributions">Distributions</option>
                        <option value="random variables" data-i18n="topic_rv">Random Variables</option>
                    </select>
                    <select id="ai-difficulty" class="ai-select">
                        <option value="beginner" data-i18n="filter_beginner">Beginner</option>
                        <option value="intermediate" data-i18n="filter_intermediate">Intermediate</option>
                        <option value="advanced" data-i18n="filter_advanced">Advanced</option>
                        <option value="olympic" data-i18n="filter_olympic">Olympic</option>
                    </select>
                    <button class="glow-btn" onclick="generateAIProblem()">
                        <i class="fas fa-bolt"></i> <span data-i18n="btn_generate_problem">Generate Problem</span>
                    </button>
                </div>

                <div id="ai-workspace">
                    <div class="ai-problem">
                        <h4><i class="fas fa-question-circle"></i> <span data-i18n="ai_workspace_title">Generated
                                Problem</span></h4>
                        <p id="ai-question-text"></p>
                    </div>
                    <div class="ai-input-area">
                        <textarea id="ai-user-text" data-i18n="ai_placeholder_solution"
                            placeholder="Write your solution here..."></textarea>
                        <label class="file-upload-label">
                            <i class="fas fa-camera"></i> <span data-i18n="ai_upload_label">Upload handwritten
                                solution</span>
                            <input type="file" id="ai-user-image" accept="image/*" onchange="previewImage(this)"
                                style="display:none">
                        </label>
                        <div id="img-preview-container" style="display:none; margin-top:15px;">
                            <img id="img-preview"
                                style="max-width:300px; border-radius:8px; border:1px solid rgba(255,255,255,0.2)">
                        </div>
                    </div>
                    <button class="glow-btn ai-check-btn" onclick="checkSolutionWithAI()" style="margin-top:15px;">
                        <i class="fas fa-microchip"></i> <span data-i18n="btn_ask_ai">Ask AI to Check</span>
                    </button>
                    <div id="ai-feedback">
                        <h3><span data-i18n="ai_score_label">Score:</span> <span id="ai-score"
                                style="color:var(--accent-gold)"></span></h3>
                        <div id="ai-feedback-content"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ LAB PAGE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
        <section id="lab" class="page-section">
            <h1 style="margin:20px 0 30px; font-size:2.2rem;">
                <i class="fas fa-flask" style="color:var(--accent-blue)"></i>
                <span data-i18n="section_lab">The Lab â€” Calculator & Graphs</span>
            </h1>

            <div class="lab-grid">
                <!-- LEFT: Calculator -->
                <div class="lab-panel">
                    <h2><i class="fas fa-calculator"></i> <span data-i18n="card_tab_calc">Calculator</span></h2>

                    <!-- CALCULATOR HEADER -->
                    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
                        <div class="calc-display-container" style="flex:1; margin-bottom:0;">
                            <input type="text" id="calc-input" data-i18n="calc_placeholder" placeholder="...">
                            <div id="calc-result" style="font-size:0.9rem; color:var(--accent-gold);">0</div>
                        </div>
                    </div>

                    <!-- TABS -->
                    <div class="calc-tabs">
                        <button class="calc-tab active" onclick="switchCalcTab('basic')"
                            data-i18n="calc_group_basic">Basic</button>
                        <button class="calc-tab" onclick="switchCalcTab('advanced')"
                            data-i18n="calc_group_adv">Advanced</button>
                        <button class="calc-tab" onclick="switchCalcTab('greek')"
                            data-i18n="calc_group_greek">Greek</button>
                    </div>

                    <!-- KEYPADS (Always Available) -->
                    <div id="calc-pad-basic" class="keypad calc-pad active">
                        <button class="key num" onclick="addToCalc('7')">7</button>
                        <button class="key num" onclick="addToCalc('8')">8</button>
                        <button class="key num" onclick="addToCalc('9')">9</button>
                        <button class="key op" onclick="addToCalc('/')">Ã·</button>

                        <button class="key num" onclick="addToCalc('4')">4</button>
                        <button class="key num" onclick="addToCalc('5')">5</button>
                        <button class="key num" onclick="addToCalc('6')">6</button>
                        <button class="key op" onclick="addToCalc('*')">Ã—</button>

                        <button class="key num" onclick="addToCalc('1')">1</button>
                        <button class="key num" onclick="addToCalc('2')">2</button>
                        <button class="key num" onclick="addToCalc('3')">3</button>
                        <button class="key op" onclick="addToCalc('-')">âˆ’</button>

                        <button class="key num" onclick="addToCalc('0')">0</button>
                        <button class="key num" onclick="addToCalc('.')">.</button>
                        <button class="key action" onclick="backspaceCalc()"><i class="fas fa-backspace"></i></button>
                        <button class="key op" onclick="addToCalc('+')">+</button>

                        <button class="key action" onclick="clearCalc()">AC</button>
                        <button class="key op" onclick="addToCalc('(')">(</button>
                        <button class="key op" onclick="addToCalc(')')">)</button>
                        <button class="key enter" onclick="calculateResult()">=</button>
                    </div>

                    <div id="calc-pad-advanced" class="keypad calc-pad">
                        <button class="key op" onclick="addToCalc('!')">n!</button>
                        <button class="key op" onclick="addToCalc('C(')">C(n,k)</button>
                        <button class="key op" onclick="addToCalc('P(')">P(n,k)</button>
                        <button class="key op" onclick="addToCalc('sqrt(')">âˆš</button>

                        <button class="key op" onclick="addToCalc('^')">^</button>
                        <button class="key op" onclick="addToCalc('log(')">log</button>
                        <button class="key op" onclick="addToCalc('ln(')">ln</button>
                        <button class="key op" onclick="addToCalc('abs(')">abs</button>

                        <button class="key op" onclick="addToCalc('sin(')">sin</button>
                        <button class="key op" onclick="addToCalc('cos(')">cos</button>
                        <button class="key op" onclick="addToCalc('tan(')">tan</button>
                        <button class="key op" onclick="addToCalc('e')">e</button>

                        <button class="key op" onclick="addToCalc('âˆª')" style="color:var(--accent-pink)">âˆª</button>
                        <button class="key op" onclick="addToCalc('âˆ©')" style="color:var(--accent-blue)">âˆ©</button>
                        <button class="key op" onclick="addToCalc(',')">,</button>
                        <button class="key enter" onclick="calculateResult()">=</button>
                    </div>

                    <div id="calc-pad-greek" class="keypad calc-pad">
                        <button class="key op" onclick="addToCalc('Î±')">Î±</button>
                        <button class="key op" onclick="addToCalc('Î²')">Î²</button>
                        <button class="key op" onclick="addToCalc('Î³')">Î³</button>
                        <button class="key op" onclick="addToCalc('Î»')">Î»</button>

                        <button class="key op" onclick="addToCalc('Î¼')">Î¼</button>
                        <button class="key op" onclick="addToCalc('Ïƒ')">Ïƒ</button>
                        <button class="key op" onclick="addToCalc('Ï€')">Ï€</button>
                        <button class="key op" onclick="addToCalc('Î©')">Î©</button>

                        <button class="key op" onclick="addToCalc('Îµ')">Îµ</button>
                        <button class="key op" onclick="addToCalc('Î´')">Î´</button>
                        <button class="key op" onclick="addToCalc('Î¸')">Î¸</button>
                        <button class="key op" onclick="addToCalc('âˆž')">âˆž</button>

                        <button class="key action" onclick="clearCalc()">AC</button>
                        <button class="key action" onclick="backspaceCalc()"><i class="fas fa-backspace"></i></button>
                        <button class="key op" onclick="addToCalc(',')">,</button>
                        <button class="key enter" onclick="calculateResult()">=</button>
                    </div>

                    <!-- Step-by-Step Toggle Bar -->
                    <button id="btn-formula-drawer" class="drawer-toggle-btn" onclick="toggleFormulaPanel()">
                        <i class="fas fa-chevron-down"></i> <span data-i18n="btn_step_solver">Step-by-Step Solver</span>
                    </button>

                    <!-- FORMULA STEPS DRAWER -->
                    <div id="calc-formula-container"
                        style="display:none; margin-top:20px; border-top:1px solid rgba(255,255,255,0.1); padding-top:15px;">
                        <h3 data-i18n="calc_mode_formula"
                            style="font-size:1rem; color:var(--accent-blue); margin-bottom:10px;">Step-by-Step Formulas
                        </h3>
                        <select id="formula-select" class="ai-select" style="width:100%; margin-bottom:15px;"
                            onchange="renderFormulaInputs()">
                            <option value="">-- Select Formula --</option>
                            <option value="bernoulli">Bernoulli Formula</option>
                            <option value="bayes">Bayes' Theorem</option>
                            <option value="combinations">Combinations (C_n^k)</option>
                            <option value="permutations">Permutations (P_n)</option>
                            <option value="normal_calc">Normal Dist (Z-Table)</option>
                            <option value="poisson">Poisson Approx</option>
                        </select>
                        <div id="formula-inputs" style="margin-bottom:15px;"></div>
                        <button class="glow-btn small" onclick="solveFormulaWithSteps()" style="width:100%"><i
                                class="fas fa-lightbulb"></i> Solve</button>
                        <div id="formula-steps"
                            style="margin-top:15px; background:rgba(0,0,0,0.2); padding:10px; border-radius:8px; font-family:'Fira Code', monospace; font-size:0.9rem;">
                        </div>
                    </div>
                </div>

                <!-- RIGHT: Visualizer -->
                <div class="lab-panel">
                    <h2><i class="fas fa-chart-pie"></i> <span data-i18n="card_visualizer">Data Visualizer</span></h2>

                    <div class="vis-controls-advanced">
                        <div class="vis-header">
                            <select id="dist-select" onchange="updateVisualizer()" class="modern-select">
                                <option value="normal" data-i18n="dist_normal">Normal Distribution</option>
                                <option value="venn" data-i18n="dist_venn">Venn Diagram</option>
                                <option value="tree" data-i18n="dist_tree">Probability Tree</option>
                            </select>
                            <button class="glow-btn small" onclick="drawGraph()">
                                <i class="fas fa-sync-alt"></i> <span data-i18n="btn_render">Render</span>
                            </button>
                        </div>
                        
                        <!-- Dynamic Parameters Area -->
                        <div id="dist-params" class="dist-params-panel"></div>
                    </div>

                    <div class="canvas-container">
                        <canvas id="lab-canvas" width="600" height="400"></canvas>
                    </div>
                    
                    <!-- Analysis/Output Panel -->
                    <div id="dist-analysis" class="analysis-panel" style="display:none">
                        <h4 data-i18n="analysis_title">Analysis</h4>
                        <div id="dist-output" class="dist-output-content"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ SIMULATIONS PAGE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
        <section id="simulations" class="page-section">
            <h1 style="margin:20px 0 10px; font-size:2.2rem;">
                <i class="fas fa-atom" style="color:var(--accent-pink)"></i>
                <span data-i18n="section_sims">Monte Carlo Playground</span>
            </h1>
            <p class="intro-text" data-i18n="intro_sims">Watch probability come alive through interactive simulations!
            </p>

            <!-- Simulation Tabs -->
            <div class="sim-tabs" style="display:flex; gap:10px; margin-bottom:30px; flex-wrap:wrap;">
                <button class="glow-btn sim-tab-btn active" onclick="showSimulation('galton', this)">
                    <i class="fas fa-circle-notch"></i> <span data-i18n="sim_galton_btn">Galton Board</span>
                </button>
                <button class="glow-btn secondary sim-tab-btn" onclick="showSimulation('monty', this)">
                    <i class="fas fa-door-open"></i> <span data-i18n="sim_monty_btn">Monty Hall</span>
                </button>
                <button class="glow-btn secondary sim-tab-btn" onclick="showSimulation('buffon', this)">
                    <i class="fas fa-ruler"></i> <span data-i18n="sim_buffon_btn">Buffon's Needle</span>
                </button>
            </div>

            <!-- â”€â”€â”€â”€ GALTON BOARD â”€â”€â”€â”€ -->
            <!-- â”€â”€â”€â”€ GALTON BOARD â”€â”€â”€â”€ -->
            <div id="sim-galton" class="sim-panel glass-panel" style="display:block; padding:20px;">
                <div class="sim-header" style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
                    <div>
                        <h2 style="margin:0; background:linear-gradient(45deg, #4cc9f0, #4361ee); -webkit-background-clip:text; -webkit-text-fill-color:transparent;">Galton Board</h2>
                        <p style="color:#aaa; font-size:0.9rem; margin-top:5px;" data-i18n="sim_galton_desc_short">Demonstrating Central Limit Theorem via Normal Distribution</p>
                    </div>
                </div>

                <div class="sim-layout" style="display:flex; flex-wrap:wrap; gap:20px;">
                    <div class="canvas-wrapper" style="flex:2; min-width:300px; background:rgba(0,0,0,0.3); border-radius:12px; padding:10px;">
                        <canvas id="galton-canvas" style="width:100%; height:500px;"></canvas>
                    </div>
                    
                    <div class="controls-wrapper" style="flex:1; min-width:250px; display:flex; flex-direction:column; gap:15px;">
                        <!-- Stats Card -->
                        <div class="stats-card" id="galton-stats-advanced" style="background:rgba(255,255,255,0.05); padding:15px; border-radius:10px; border:1px solid rgba(255,255,255,0.1);">
                            <h4 style="margin:0 0 10px; color:#ffd60a; font-size:0.9rem; text-transform:uppercase;" data-i18n="stat_realtime_analysis">Real-time Analysis</h4>
                            <div style="display:grid; grid-template-columns:1fr 1fr; gap:10px; font-size:0.85rem;">
                                <div><span data-i18n="stat_mean">Mean (Î¼):</span> <span id="galton-mean" style="color:#fff">0.00</span></div>
                                <div><span data-i18n="stat_stddev">StdDev (Ïƒ):</span> <span id="galton-std" style="color:#fff">0.00</span></div>
                                <div style="grid-column:span 2; height:1px; background:rgba(255,255,255,0.1); margin:5px 0;"></div>
                                <div><span data-i18n="stat_dropped">Dropped:</span> <span id="galton-total-balls">0</span></div>
                                <div><span data-i18n="stat_finished">Finished:</span> <span id="galton-finished-balls">0</span></div>
                            </div>
                        </div>

                        <!-- Controls -->
                        <div class="control-group">
                            <label>Rows (Bin Count)</label>
                            <input type="range" id="galton-rows" min="8" max="16" value="12" step="1" oninput="document.getElementById('row-val').innerText=this.value; setTimeout(initGalton, 100);">
                            <div style="text-align:right; font-size:0.8rem; color:#aaa;"><span id="row-val">12</span> Rows</div>
                        </div>
                        
                        <div style="display:grid; grid-template-columns:1fr 1fr; gap:10px;">
                             <button class="glow-btn small" onclick="dropGaltonBalls(1)">+1 Ball</button>
                             <button class="glow-btn small" onclick="dropGaltonBalls(50)">+50 Balls</button>
                             <button class="glow-btn small" onclick="dropGaltonBalls(500)">+500 Balls</button>
                             <button class="glow-btn small secondary" onclick="resetGalton()">Reset</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- â”€â”€â”€â”€ MONTY HALL â”€â”€â”€â”€ -->
            <div id="sim-monty" class="sim-panel glass-panel" style="display:none; padding:20px;">
                <div class="sim-header" style="margin-bottom:15px;">
                     <h2 style="margin:0; background:linear-gradient(45deg, #f72585, #7209b7); -webkit-background-clip:text; -webkit-text-fill-color:transparent;">Monty Hall Problem</h2>
                     <p style="color:#aaa; font-size:0.9rem;" data-i18n="sim_monty_desc_short">A probability puzzle based on a game show</p>
                </div>

                <div class="sim-layout" style="display:flex; flex-wrap:wrap; gap:20px;">
                    <div style="flex:2; min-width:300px; display:flex; flex-direction:column; align-items:center;">
                         <p id="monty-message"
                            style="font-size:1.5rem; text-align:center; min-height:60px; margin-bottom:20px; color:#fff; font-weight:bold;">
                            Choose a door!
                        </p>
                        <div id="monty-doors" class="door-container" style="gap:20px;">
                            <div class="door" onclick="montyChooseDoor(0)">
                                <span class="door-number">1</span><span class="door-content">ðŸšª</span>
                            </div>
                            <div class="door" onclick="montyChooseDoor(1)">
                                <span class="door-number">2</span><span class="door-content">ðŸšª</span>
                            </div>
                            <div class="door" onclick="montyChooseDoor(2)">
                                <span class="door-number">3</span><span class="door-content">ðŸšª</span>
                            </div>
                        </div>

                        <div id="monty-actions" style="display:none; gap:15px; margin:20px 0;">
                            <button class="glow-btn large" style="min-width:150px;" onclick="montyDecision(true)">
                                <i class="fas fa-exchange-alt"></i> <span data-i18n="btn_switch">Switch!</span>
                            </button>
                            <button class="glow-btn secondary large" style="min-width:150px;" onclick="montyDecision(false)">
                                <i class="fas fa-hand-paper"></i> <span data-i18n="btn_stay">Stay</span>
                            </button>
                        </div>
                    </div>

                    <div class="controls-wrapper" style="flex:1; min-width:250px; display:flex; flex-direction:column; gap:15px;">
                        <div class="stats-card" style="background:rgba(255,255,255,0.05); padding:15px; border-radius:10px;">
                             <h4 style="margin:0 0 10px; color:#f72585;" data-i18n="stat_game_stats">Game Stats</h4>
                             <div class="monty-results">
                                <div class="result-row">
                                    <span style="width:60px;" data-i18n="btn_switch">Switch</span>
                                    <div class="bar-bg"><div class="bar-fill" id="monty-switch-bar"></div></div>
                                    <span id="monty-switch-pct" style="width:45px;text-align:right;">0%</span>
                                </div>
                                <div class="result-row">
                                    <span style="width:60px;" data-i18n="btn_stay">Stay</span>
                                    <div class="bar-bg"><div class="bar-fill gold" id="monty-stay-bar"></div></div>
                                    <span id="monty-stay-pct" style="width:45px;text-align:right;">0%</span>
                                </div>
                             </div>
                             <div id="monty-stats" style="margin-top:10px; font-size:0.85rem; color:#ccc;"></div>
                        </div>

                        <div class="control-group">
                            <label>Auto-Simulate</label>
                            <div style="display:grid; grid-template-columns:1fr 1fr; gap:5px;">
                                <button class="glow-btn small secondary" onclick="montyAutoRun(100)">Sim 100</button>
                                <button class="glow-btn small secondary" onclick="montyAutoRun(1000)">Sim 1000</button>
                            </div>
                        </div>
                        <button class="glow-btn secondary" onclick="resetMonty()">Reset Game</button>
                    </div>
                </div>
            </div>

            <!-- â”€â”€â”€â”€ BUFFON'S NEEDLE â”€â”€â”€â”€ -->
            <div id="sim-buffon" class="sim-panel glass-panel" style="display:none; padding:20px;">
                <div class="sim-header" style="margin-bottom:15px;">
                     <h2 style="margin:0; background:linear-gradient(45deg, #ff00cc, #333399); -webkit-background-clip:text; -webkit-text-fill-color:transparent;">Buffon's Needle</h2>
                     <p style="color:#aaa; font-size:0.9rem;">Estimating Pi (Ï€) by dropping needles</p>
                </div>

                <div class="sim-layout" style="display:flex; flex-wrap:wrap; gap:20px;">
                    <div style="flex:2; min-width:300px;">
                        <canvas id="buffon-canvas" style="width:100%; height:400px; background:rgba(0,0,0,0.3); border-radius:12px; border:1px solid #333;"></canvas>
                        <!-- Convergence Graph (New) -->
                        <div style="margin-top:10px; height:150px; background:rgba(0,0,0,0.2); border-radius:8px; border:1px solid #444; position:relative;">
                             <canvas id="buffon-graph" style="width:100%; height:100%;"></canvas>
                        </div>
                    </div>
                    
                    <div class="controls-wrapper" style="flex:1; min-width:250px; display:flex; flex-direction:column; gap:15px;">
                         <div class="stats-card" style="background:rgba(255,255,255,0.05); padding:15px; border-radius:10px;">
                            <h4 style="margin:0 0 10px; color:#4cc9f0;" data-i18n="stat_approx_results">Approximation Results</h4>
                            <div id="buffon-stats"></div>
                        </div>

                        <!-- Config Controls -->
                        <div class="control-group">
                            <label data-i18n="buffon_length_label">Needle Length (l)</label>
                            <input type="number" id="buffon-length" value="40" min="10" max="100" style="width:100%;">
                        </div>
                         <div class="control-group">
                            <label data-i18n="buffon_spacing_label">Line Spacing (d)</label>
                            <input type="number" id="buffon-spacing" value="60" min="20" max="150" style="width:100%;">
                        </div>

                        <div class="control-group">
                            <label>Drop Needles</label>
                            <div style="display:grid; grid-template-columns:1fr 1fr; gap:5px;">
                                <button class="glow-btn small" onclick="dropNeedles(10)">+10</button>
                                <button class="glow-btn small" onclick="dropNeedles(100)">+100</button>
                                <button class="glow-btn small" onclick="animateBuffonDrop(1000)">+1k</button>
                                <button class="glow-btn small" onclick="animateBuffonDrop(10000)">+10k</button>
                            </div>
                        </div>
                        <button class="glow-btn secondary" onclick="resetBuffon()">Reset Simulation</button>
                    </div>
                </div>
            </div>
        </section>

    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• FEEDBACK MODAL â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div id="feedback-modal" class="modal-overlay">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal()">Ã—</span>
            <h2 id="modal-title"></h2>
            <p id="modal-msg" style="margin:15px 0; line-height:1.8;"></p>
            <button id="modal-action-btn" class="glow-btn" style="margin-top:15px;"></button>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• SCRIPTS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <script src="js/data.js"></script>
    <script src="js/app.js"></script>
    <script src="js/calculator.js"></script>
    <script src="js/simulations.js"></script>
    <script src="js/ai.js"></script>
    <script src="js/animations.js"></script>
</body>

